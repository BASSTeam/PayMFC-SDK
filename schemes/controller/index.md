# PayMFC | Контроллер

Контроллер состоит из набора нескольких функций-помощников для подписи, проверки подписи, генерации ссылок и ответа на запрос. Для каждой функции предложена схема работы ниже.

## Функции кодирования

* Кодирование в JSON производится с заменой символов, код которых > 127 (не входит в диапазон ASCII), на соответствующие `\u`-последовательности. Регулярное выражение PCRE для таких символов можно записать как `/[\u0080-\uFFFF]/g` (`0080` в шестнадцатеричной системе равно 128).
* Результат хэша `sha1` должен представлять собой бинарные данные с длиной в 20, а не `hex`-строку длиной в 40 символов

## Подпись

Входящие данные кодируются в JSON (см. функции кодирования), а затем в Base64.
Подпись формируется через хэш sha1 приватного ключа + закодированной строки + приватного ключа (см. функции кодирования), а затем выходные бинарные данные кодируются в Base64. Функция возвращает объект со свойствами `data` (закодированные данные) и `signature` (подпись).

## Проверка подписи



[Вернуться на главную](../..)
